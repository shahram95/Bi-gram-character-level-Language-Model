"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_use-client-value_use-client-value_ts-ui_packages_copilot-chat_components_Header_t-12eff5"],{43151:(e,r,n)=>{n.d(r,{D7:()=>i,MQ:()=>t,gE:()=>s});let t=e=>{if(e){if(e.startsWith("refs/tags/"))return"tag";if(e.startsWith("refs/heads/"))return"branch"}},i=(e,r)=>"branch"===r?`refs/heads/${e}`:"tag"===r?`refs/tags/${e}`:e,s=e=>{if(!e)return;if(!t(e))return e;let[,,...r]=e.split("/");return r.join("/")}},59008:(e,r,n)=>{n.d(r,{I:()=>o});var t=n(96540),i=n(59840),s=n(47831);function o(e,r,n=[]){let o=(0,t.useCallback)(e,n),a=(0,t.useContext)(s.xd),l=(0,t.useRef)(a===s.O8.ClientRender),[d,c]=(0,t.useState)(()=>a===s.O8.ClientRender?o():r),h=(0,t.useCallback)(()=>{c(o)},[o]);return(0,i.m)(()=>{l.current||c(o),l.current=!1},[o,...n]),[d,h]}},4954:(e,r,n)=>{n.d(r,{u:()=>o});var t=n(83056),i=n(28784),s=n(96540);function o(e,r,n,o){let[a,l]=(0,s.useState)({loading:!0}),d=r&&e&&n&&o?(0,t.IO)({repo:{name:r,ownerLogin:e},commitish:n,action:"file-contributors",path:o}):null;return(0,s.useEffect)(()=>{if(!d)return;let e=!1;return(async()=>{l({loading:!0});let r=await (0,i.lS)(d);if(!e)try{r.ok?l({contributors:await r.json()}):l({error:!0})}catch(e){l({error:!0})}})(),function(){e=!0}},[d]),a}},88299:(e,r,n)=>{n.d(r,{E:()=>p,q:()=>h});var t=n(5225),i=n(83056),s=n(27260),o=n(28784),a=n(96540);async function l(e){let r=await (0,o.lS)(e);return r.ok?await r.json():void 0}let d=new Map,c=(0,t.A)(l,{cache:d});function h(){d.clear()}function p(e,r,n,t){let[o,l]=(0,a.useState)(),[d,p]=(0,a.useState)(!1),[x,u]=(0,a.useState)(!0),m=r&&e&&n&&t?(0,i.IO)({repo:{name:r,ownerLogin:e},commitish:n,action:"latest-commit",path:t}):null;return(0,a.useEffect)(()=>(document.addEventListener(s.z.START,h),()=>{document.removeEventListener(s.z.START,h)}),[]),(0,a.useEffect)(()=>{let e=!1;return(async()=>{if(!m)return;p(!1),u(!0),l(void 0);let r=await c(m);if(!e){try{r?l(r):p(!0)}catch(e){p(!0)}u(!1)}})(),function(){e=!0}},[m,n]),[o,x,d]}},11963:(e,r,n)=>{n.d(r,{J:()=>p});var t=n(74848),i=n(16255),s=n(75177),o=n(82560),a=n(34614),l=n(67749),d=n(86079),c=n(96540),h=n(88043);let p=({onDismiss:e,experimentsDialogRef:r})=>{let[n,p]=(0,c.useState)(()=>(0,h.f)().join(",")),[x,u]=(0,c.useState)(void 0),m=(0,c.useRef)("\u200B"),f=()=>{let r=[];for(let e of n.split(","))if(""!==e.trim()){if(2!==e.split("=").length){u(`Invalid experiment key=value pair${m.current}`),m.current+="\u200B";return}u(""),r.push(e)}(0,h.R)(r),e()};return(0,t.jsx)(i.Z,{children:(0,t.jsxs)(d.l,{ref:r,onClose:e,title:"Experiments",width:"xlarge",children:[(0,t.jsx)(d.l.Body,{children:(0,t.jsx)(s.A,{sx:{p:3},children:(0,t.jsxs)(o.A,{children:[(0,t.jsx)(o.A.Label,{children:"Experiments"}),(0,t.jsx)(o.A.Caption,{children:(0,t.jsxs)("span",{children:["List experiments as comma separated ",(0,t.jsx)("code",{children:"key=value"})," pairs. To see available experiments,"," ",(0,t.jsx)(a.A,{inline:!0,target:"_blank",href:`/search?q=${encodeURIComponent("repo:github/copilot-api path:experiments.go")}`,children:"read this code"}),"."]})}),(0,t.jsx)(l.A,{sx:{width:"100%",my:2},"aria-label":"Experiments",name:"experiments",value:n,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"===e.key&&f()}}),x&&(0,t.jsx)(o.A.Validation,{variant:"error",children:x})]})})}),(0,t.jsx)(d.l.Footer,{children:(0,t.jsx)(d.l.Buttons,{buttons:[{type:"button",onClick:e,content:"Cancel"},{type:"submit",onClick:f,content:"Save",buttonType:"primary"}]})})]})})};try{p.displayName||(p.displayName="ExperimentsDialog")}catch{}},39012:(e,r,n)=>{n.d(r,{JK:()=>k,Y9:()=>D,iw:()=>I,x5:()=>C});var t=n(74848),i=n(51848),s=n(13180),o=n(51528),a=n(27788),l=n(38621),d=n(75177),c=n(84217),h=n(3121),p=n(55847),x=n(89323),u=n(16823),m=n(96540),f=n(76206),j=n(57938),g=n(47050),w=n(20458),b=n(19002),v=n(23398),y=n(11963),O=n(33333);let C="copilot-chat-header-button",D=e=>{let r=(0,g.Pk)(),n=(0,w.b)(),i=n.getSelectedThread(r),{showTopicPicker:o,messages:a}=r,p=(0,m.useCallback)(async()=>i&&n.deleteThread(i),[i,n]);return(0,t.jsxs)(d.A,{sx:{display:"flex",gap:2,p:2,pl:"immersive"===r.mode?1:3,borderBottom:r.messages.length>0?"1px solid":"none",borderColor:"border.default",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsx)(d.A,{sx:{display:"flex",flex:1,minWidth:0},children:"thread"===e.view?o||e.isImmersive||0!==a.length||r.chatIsCollapsed?(0,t.jsx)(c.A,{as:"h2",sx:{fontSize:1,display:"flex",alignItems:"center",flexGrow:1,gap:2,minWidth:0,cursor:"pointer"},onClick:e.isCollapsed?()=>n.expandChat():()=>n.collapseChat(),children:"thread"===e.view?(0,t.jsxs)(t.Fragment,{children:[(a.length>0||r.chatIsCollapsed)&&(0,t.jsx)(v.A,{isLoading:e.isResponding,hasUnreadMessages:e.hasUnreadMessages}),i?.name?(0,t.jsx)("span",{className:"Truncate",children:(0,t.jsx)("span",{className:"Truncate-text",title:i.name,children:i.name})}):e.isResponding&&r.chatIsCollapsed?(0,t.jsx)("span",{children:"Responding\u2026"}):r.chatIsCollapsed?(0,t.jsx)("span",{children:"Ask Copilot"}):!o&&(0,t.jsx)("span",{children:"New conversation"})]}):"Copilot"}):(0,t.jsx)(b.A,{}):(0,t.jsx)(N,{})}),(0,t.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[!e.isCollapsed&&(0,t.jsxs)(t.Fragment,{children:[r.renderBetaLabel&&(0,t.jsx)(h.A,{variant:"success",sx:{mr:2},children:"Beta"}),"thread"===e.view?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.v,{hidden:0===a.length,variant:"invisible",icon:l.PlusIcon,label:"New conversation",tooltipDirection:"s",onClick:async()=>{await n.createThread()},sx:{color:"fg.muted"}}),(0,t.jsx)(I,{handleDelete:p,thread:i,setShowExperimentsDialog:e.setShowExperimentsDialog})]}):(0,t.jsx)(s.v,{variant:"invisible",icon:l.PlusIcon,label:"New conversation",tooltipDirection:"w",onClick:async()=>{await n.createThread()},sx:{color:"fg.muted"}})]}),!e.isImmersive&&(0,t.jsxs)(t.Fragment,{children:[!e.isCollapsed&&(0,t.jsx)(d.A,{sx:{mx:2,height:"20px",width:"1px",bg:"border.muted"}}),(0,t.jsx)(s.v,{variant:"invisible",icon:e.isCollapsed?l.ChevronUpIcon:l.ChevronDownIcon,label:e.isCollapsed?"Expand":"Collapse",tooltipDirection:e.isCollapsed?"w":"sw",onClick:()=>{k(e.isCollapsed),e.isCollapsed?n.expandChat():n.collapseChat()},sx:{color:"fg.muted"},"data-hotkey":"Shift+Z"}),!j.W.copilotFloatingButton&&(0,t.jsx)(s.v,{variant:"invisible",icon:l.XIcon,"aria-label":"Close",label:"Close Copilot chat",tooltipDirection:"w",onClick:()=>{k(!1),n.closeChat(r.chatVisibleSettingPath)},sx:{color:"fg.muted"},"data-hotkey":"Shift+X"})]})]}),e.showExperimentsDialog&&(0,t.jsx)(y.J,{experimentsDialogRef:e.experimentsDialogRef,onDismiss:()=>e.setShowExperimentsDialog(!1)})]})},N=()=>{let{mode:e}=(0,g.Pk)(),r=(0,w.b)();return(0,t.jsx)(p.Q,{leadingVisual:l.ArrowLeftIcon,variant:"invisible",onClick:()=>r.viewCurrentThread(),sx:{color:"fg.muted",marginLeft:"assistive"===e?"-8px":void 0},children:"Back"})},I=e=>{let[r,n]=(0,m.useState)(!1),{chatVisibleSettingPath:d,currentTopic:c,mode:p,streamingMessage:b}=(0,g.Pk)(),{thread:v}=e,y=(0,a.Z)(),C=(0,w.b)(),D=(0,m.useCallback)(()=>{C.viewAllThreads(),(0,i.BI)("copilot.view-conversations-clicked")},[C]),N=(0,m.useMemo)(()=>(0,o.X)(),[]),I=!e.thread,L=(0,m.useMemo)(()=>v?`${f.Jz}/c/${v.id}`:c&&(0,f.Z6)(c)?`${f.Jz}/r/${c.ownerLogin}/${c.name}`:c&&(0,f.P)(c)?`${f.Jz}/d/${c.id}`:f.Jz,[v,c]);return(0,t.jsxs)(x.W,{open:r,onOpenChange:()=>n(e=>!e),children:[(0,t.jsx)(x.W.Anchor,{children:(0,t.jsx)(s.v,{icon:l.KebabHorizontalIcon,variant:"invisible",label:"Conversation options",tooltipDirection:"s",hideTooltip:r,sx:{color:"fg.muted"}})}),(0,t.jsx)(O.UJ,{children:(0,t.jsxs)(u.l,{children:["immersive"!==p&&(0,t.jsxs)(u.l.Item,{onSelect:()=>y(L),disabled:!!b,children:[(0,t.jsx)(u.l.LeadingVisual,{children:(0,t.jsx)(l.ScreenFullIcon,{})}),"Take conversation to immersive"]}),(0,t.jsxs)(u.l.Item,{variant:I?"default":"danger",onSelect:()=>{e.handleDelete(),n(!1)},disabled:I,"aria-describedby":"delete-conversation-description",children:[(0,t.jsx)(u.l.LeadingVisual,{children:(0,t.jsx)(l.TrashIcon,{})}),"Delete conversation",(0,t.jsx)("p",{id:"delete-conversation-description",className:"sr-only",children:"This is a destructive action that cannot be undone"})]}),(0,t.jsx)(u.l.Divider,{}),"assistive"===p&&(0,t.jsxs)(u.l.Item,{onSelect:D,children:[(0,t.jsx)(u.l.LeadingVisual,{children:(0,t.jsx)(l.HistoryIcon,{})}),"View all conversations"]}),(0,t.jsxs)(u.l.LinkItem,{href:"https://gh.io/copilot-in-githubdotcom",rel:"noopener noreferrer",target:"_blank",children:[(0,t.jsx)(u.l.LeadingVisual,{children:(0,t.jsx)(l.CommentDiscussionIcon,{})}),"Give feedback"]}),"assistive"===p&&j.W.copilotFloatingButton&&(0,t.jsxs)(u.l.Item,{onSelect:()=>{k(!1),C.closeChat(d)},children:[(0,t.jsx)(u.l.LeadingVisual,{children:(0,t.jsx)(l.EyeClosedIcon,{})}),"Hide Copilot chat"]}),N&&(0,t.jsxs)(u.l.Item,{onSelect:()=>e.setShowExperimentsDialog(!0),children:[(0,t.jsx)(u.l.LeadingVisual,{children:(0,t.jsx)(l.BeakerIcon,{})}),"Configure experiments",(0,t.jsx)(u.l.TrailingVisual,{children:(0,t.jsx)(h.A,{variant:"attention",children:"Staff"})})]})]})})]})};function k(e){let r=document.getElementById(C);r?.setAttribute("aria-expanded",e?"true":"false")}try{D.displayName||(D.displayName="Header")}catch{}try{N.displayName||(N.displayName="ReturnToCurrentThreadButton")}catch{}try{I.displayName||(I.displayName="ThreadOptionButton")}catch{}},45471:(e,r,n)=>{n.d(r,{W:()=>Y});var t=n(74848),i=n(26886),s=n(42024),o=n(47050),a=n(20458),l=n(76206),d=n(97286),c=n(96540),h=n(22868),p=n(83056),x=n(43151),u=n(97156),m=n(4954),f=n(88299),j=n(38621),g=n(52464),w=n(75177),b=n(89169),v=n(30631),y=n(10871),O=n(87330),C=n(4788),D=n(22084);function N({lineNumbers:e,lines:r,trimLineBeginnings:n}){return(0,t.jsx)(w.A,{sx:{display:"flex",flexDirection:"row",overflowX:"auto",pb:3},children:(0,t.jsx)("table",{style:{fontSize:"12px",fontFamily:"ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace",overflowX:"auto"},children:e.map((e,i)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e},e),(0,t.jsx)("td",{style:{whiteSpace:"pre",paddingLeft:"16px"},children:(0,t.jsx)(D.mo,{html:n?(r[i]??"").trimStart():r[i]||"\n"},`line-${i}`)})]},`line-row-${e}`))})})}try{N.displayName||(N.displayName="SimpleCodeListing")}catch{}function I({reference:e,details:r,detailsLoading:n,detailsError:i,onDismiss:s}){let{contributors:o}=(0,m.u)(e.repoOwner,e.repoName,e.commitOID,e.path),[a]=(0,f.E)(e.repoOwner,e.repoName,e.commitOID,e.path),{lines:l,lineNumbers:d,expandUp:u,expandDown:v}=function(e,r,n){let t=(0,c.useRef)(e?.start??-1),i=(0,c.useRef)(e?.end??-1),[s,o]=(0,c.useState)(n&&e&&r?n.slice(e.start-r.start,e.end-r.start+1):[]),a=(0,c.useCallback)(()=>{n&&e&&r&&!(t.current<0)&&!(i.current<0)&&o(n.slice(t.current-r.start,i.current-r.start+1))},[n,e,r]);(0,c.useEffect)(()=>{e&&n&&(-1===t.current||-1===i.current)&&(t.current=e.start,i.current=e.end,a())},[n,e,r,a]);let l=(0,c.useCallback)(()=>{t.current=Math.max(t.current-S,r?.start??-1),a()},[r?.start,a]),d=(0,c.useCallback)(()=>{i.current=Math.min(i.current+S,r?.end??-1),a()},[r?.end,a]),h=-1!==t.current&&t.current!==r?.start,p=-1!==i.current&&i.current!==r?.end;return{lines:s,lineNumbers:s.map((e,r)=>t.current+r),expandUp:h?l:null,expandDown:p?d:null}}(r?.range,r?.expandedRange,r?.highlightedContents),y=r?.headerInfo;return(0,t.jsxs)(C.O.Frame,{children:[(0,t.jsxs)(C.O.Header,{onDismiss:s,children:[(0,t.jsx)(h.r,{square:r?.repoIsOrgOwned,src:`${e.repoOwner}.png`,sx:{mr:2,flexShrink:0}}),(0,t.jsxs)(g.A,{sx:{fontWeight:600,whiteSpace:"nowrap"},children:[e.repoOwner,"/",e.repoName]}),(0,t.jsx)(g.A,{sx:{marginX:1},children:"\xb7"}),(0,t.jsx)(g.A,{sx:{fontWeight:400},children:(0,x.gE)(e.ref)}),(0,t.jsx)(g.A,{sx:{marginX:1},children:"\xb7"}),(0,t.jsx)(g.A,{sx:{fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",direction:"rtl"},children:e.path}),"snippet"===e.type&&(0,t.jsxs)("span",{children:[":",e.range.start,"-",e.range.end]})]}),(0,t.jsxs)(C.O.Body,{detailsError:i,detailsLoading:n,children:[(0,t.jsxs)(w.A,{sx:{border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"6px 6px 0 0",marginX:3},children:[(0,t.jsxs)(k,{children:[y&&(0,t.jsx)(L,{headerInfo:y}),y&&(0,t.jsx)(A,{headerInfo:y})]}),u&&(0,t.jsx)(C.O.ContentExpander,{direction:"above",onExpand:u}),(0,t.jsx)(C.O.Content,{children:(0,t.jsx)(N,{lines:l,lineNumbers:d})}),v&&(0,t.jsx)(C.O.ContentExpander,{direction:"below",onExpand:v})]}),(0,t.jsxs)(C.O.Details,{children:[(0,t.jsxs)(C.O.DetailLink,{href:(0,p.Do)({name:e.repoName,ownerLogin:e.repoOwner}),icon:j.RepoIcon,children:[e.repoOwner,"/",e.repoName]}),o&&(0,t.jsxs)(C.O.DetailLink,{icon:j.PeopleIcon,href:(0,p.bu)({owner:e.repoOwner,repo:e.repoName,commitish:e.commitOID,filePath:e.path,lineNumber:r?.range.start}),children:[o.totalCount," ",1===o.totalCount?"contributor":"contributors"]}),a&&(0,t.jsxs)(C.O.DetailLink,{icon:j.HistoryIcon,href:(0,p.$Q)({owner:e.repoOwner,repo:e.repoName,commitish:a?.oid}),children:[a?.author?.displayName," updated ",(0,t.jsx)(b.A,{datetime:a?.date})]}),(0,t.jsxs)(C.O.DetailLink,{icon:j.LinkExternalIcon,href:e.url,children:[e.repoOwner,"/",e.repoName,"/",e.path,"snippet"===e.type?(0,t.jsxs)(t.Fragment,{children:["#",e.range.start,"-",e.range.end]}):null]})]})]})]})}function k({children:e}){return(0,t.jsx)(w.A,{sx:{p:2,display:"flex",flex:1,alignItems:"center",justifyContent:"space-between",backgroundColor:"canvas.subtle",borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"6px 6px 0px 0px"},children:e})}function L({headerInfo:e}){return(0,t.jsx)(v.A,{title:e.blobSize,inline:!0,sx:{maxWidth:"100%",color:"fg.subtle"},"data-testid":"blob-size",children:(0,t.jsx)("span",{children:`${e.lineInfo.truncatedLoc} lines (${e.lineInfo.truncatedSloc} loc) \xb7 ${e.blobSize}`})})}function A({headerInfo:e}){let r=new URL(e.rawBlobUrl,u.fV.origin);r.searchParams.set("download","");let n={"aria-label":"Download raw content",icon:j.DownloadIcon,size:"small",onClick:async()=>{e.isLfs||await E(e.rawBlobUrl,e.displayName)},"data-testid":"download-raw-button",sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0}};return(0,t.jsxs)(w.A,{sx:{display:"flex"},children:[(0,t.jsx)(y.z,{href:e.rawBlobUrl,download:e.viewable?void 0:"true",size:"small",sx:{linkButtonSx:R,px:2,borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:"none"},"data-testid":"raw-button",children:"Raw"}),e.isLfs?(0,t.jsx)(O.K,{unsafeDisableTooltip:!0,as:"a","data-turbo":"false",href:r.toString(),...n}):(0,t.jsx)(O.K,{unsafeDisableTooltip:!0,...n})]})}let S=25,R={"&:hover:not([disabled])":{textDecoration:"none"},"&:focus:not([disabled])":{textDecoration:"none"},"&:active:not([disabled])":{textDecoration:"none"}};async function E(e,r){let n=await fetch(e,{method:"get"}),t=await n.blob(),i=document.createElement("a");i.setAttribute("download",r);let s=URL.createObjectURL(t);i.href=s,i.setAttribute("target","_blank"),i.click(),URL.revokeObjectURL(s)}try{I.displayName||(I.displayName="CodeReferencePreview")}catch{}try{k.displayName||(k.displayName="BlobPreviewHeader")}catch{}try{L.displayName||(L.displayName="BlobSize")}catch{}try{A.displayName||(A.displayName="RawButtons")}catch{}var $=n(36305),B=n(72574),T=n(30729);function P({reference:e,detailsLoading:r,detailsError:n,onDismiss:i}){return(0,t.jsxs)(C.O.Frame,{children:[(0,t.jsxs)(C.O.Header,{onDismiss:i,children:[(0,t.jsx)(T.A,{icon:j.GitCommitIcon,sx:{mr:2}}),(0,t.jsx)(w.A,{sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:e.message})]}),(0,t.jsxs)(C.O.Body,{detailsError:n,detailsLoading:r,children:[(0,t.jsxs)(w.A,{sx:{display:"flex",flexDirection:"row",p:3},children:[(0,t.jsx)(h.r,{src:`${e.author.login}.png`,sx:{mr:2,flexShrink:0}}),(0,t.jsx)(w.A,{sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",direction:"rtl"},children:e.author.login})]}),(0,t.jsx)(w.A,{sx:{borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))"}}),(0,t.jsx)(C.O.Content,{children:(0,t.jsx)(B.G,{verifiedHTML:(0,$.Kc)(e.message)})}),(0,t.jsx)(w.A,{sx:{borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))"}}),(0,t.jsxs)(C.O.Details,{children:[(0,t.jsxs)(C.O.DetailLink,{href:(0,p.Do)({name:e.repository.name,ownerLogin:e.repository.owner}),icon:j.RepoIcon,children:[e.repository.owner,"/",e.repository.name]}),(0,t.jsxs)(C.O.DetailLink,{href:e.permalink,icon:j.LinkExternalIcon,children:[e.repository.owner,"/",e.repository.name,"/commit/",e.oid]})]})]})]})}try{P.displayName||(P.displayName="CommitReferencePreview")}catch{}var F=n(58081);function M({reference:e,details:r,detailsLoading:n,detailsError:i,onDismiss:s}){let{contributors:o}=(0,m.u)(e.repoOwner,e.repoName,e.commitOID,e.path),[a]=(0,f.E)(e.repoOwner,e.repoName,e.commitOID,e.path);return(0,t.jsxs)(C.O.Frame,{children:[(0,t.jsxs)(C.O.Header,{onDismiss:s,children:[(0,t.jsx)(h.r,{square:r?.repoIsOrgOwned,src:`${e.repoOwner}.png`,sx:{mr:2,flexShrink:0}}),(0,t.jsxs)(g.A,{sx:{fontWeight:600,whiteSpace:"nowrap"},children:[e.repoOwner,"/",e.repoName]}),(0,t.jsx)(g.A,{sx:{marginX:1},children:"\xb7"}),(0,t.jsx)(g.A,{sx:{fontWeight:400},children:(0,x.gE)(e.ref)}),(0,t.jsx)(g.A,{sx:{marginX:1},children:"\xb7"}),(0,t.jsx)(g.A,{sx:{fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",direction:"rtl"},children:e.path})]}),(0,t.jsxs)(C.O.Body,{detailsLoading:n,detailsError:i,children:[r&&(0,t.jsx)(V,{details:r}),(0,t.jsxs)(C.O.Details,{children:[(0,t.jsxs)(C.O.DetailLink,{href:(0,p.Do)({name:e.repoName,ownerLogin:e.repoOwner}),icon:j.RepoIcon,children:[e.repoOwner,"/",e.repoName]}),o&&(0,t.jsxs)(C.O.DetailLink,{icon:j.PeopleIcon,href:(0,p.bu)({owner:e.repoOwner,repo:e.repoName,commitish:e.commitOID,filePath:e.path,lineNumber:r?.range.start}),children:[o.totalCount," contributors"]}),a&&(0,t.jsxs)(C.O.DetailLink,{icon:j.HistoryIcon,href:(0,p.$Q)({owner:e.repoOwner,repo:e.repoName,commitish:a?.oid}),children:[a?.author?.displayName," updated ",(0,t.jsx)(b.A,{datetime:a?.date})]}),(0,t.jsxs)(C.O.DetailLink,{icon:j.LinkExternalIcon,href:e.url,children:[e.repoOwner,"/",e.repoName,"/",e.path,r?(0,t.jsxs)(t.Fragment,{children:["#",r.range.start,"-",r.range.end]}):null]})]})]})]})}function V({details:e}){let[r,n]=(0,c.useState)(e.range.start),[i,s]=(0,c.useState)(e.range.end),o=(0,c.useMemo)(()=>z(e.contents,e.contents.length),[e.contents]),[a,l]=(0,c.useState)("preview"),d=e?.headerInfo,h=(0,c.useCallback)(()=>{n(function(e,r){let n=H(e,r),t=function(e){let r;for(let n of e)r=n;return r}(e.slice(0,n).matchAll(/^#+\s/gm));return z(e,t?.index??0)}(e.contents,r))},[e.contents,r]),p=(0,c.useCallback)(()=>{let r=i;for(;r<o&&r<i+10;)r=function(e,r){let n=H(e,r),t=e.slice(n).match(/^#+\s/m),i=t?n+t.index:e.length;return z(e,i)}(e.contents,r+1);s(r-1)},[e.contents,i,o]);return(0,t.jsxs)(w.A,{sx:{border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"6px 6px 0 0",marginX:3},children:[(0,t.jsxs)(k,{children:[(0,t.jsxs)(w.A,{sx:{display:"flex",alignItems:"baseline",gap:2},children:[(0,t.jsxs)(F.I,{"aria-label":"File view",size:"small",onChange:e=>{let r=["preview","code"][e];r&&a!==r&&l(r)},sx:{fontSize:1},children:[(0,t.jsx)(F.I.Button,{selected:"preview"===a,children:"Preview"},"preview'"),(0,t.jsx)(F.I.Button,{selected:"code"===a,children:"Code"},"raw")]}),d&&(0,t.jsx)(L,{headerInfo:d})]}),d&&(0,t.jsx)(A,{headerInfo:d})]}),r>1&&(0,t.jsx)(C.O.ContentExpander,{direction:"above",onExpand:h}),(0,t.jsx)(C.O.Content,{children:"preview"===a?(0,t.jsx)(w.A,{className:"js-snippet-clipboard-copy-unpositioned",sx:{".highlighted":{backgroundColor:e=>`${e.colors.accent.subtle}`}},children:(0,t.jsx)(B.G,{verifiedHTML:(0,$.Kc)(e.contents,null,[],!1,void 0,void 0,r,i)})}):(0,t.jsx)("code",{children:(0,t.jsx)(w.A,{as:"pre",sx:{overflowX:"auto"},children:e.contents})})}),i<o&&(0,t.jsx)(C.O.ContentExpander,{direction:"below",onExpand:p})]})}function z(e,r){return function(e){let r=0;for(let n of e)r++;return r}(e.slice(0,r).matchAll(/\n/g))+1}function H(e,r){if(1===r)return 0;let n=-1;for(let t=2;t<=r;t++)if(-1===(n=e.indexOf("\n",n+1)))return e.length;return n+1}try{M.displayName||(M.displayName="MarkdownReferencePreview")}catch{}try{V.displayName||(V.displayName="MarkdownReferencePreviewContent")}catch{}function W({reference:e,detailsLoading:r,detailsError:n,onDismiss:i}){return(0,t.jsxs)(C.O.Frame,{children:[(0,t.jsxs)(C.O.Header,{onDismiss:i,children:[(0,t.jsx)(T.A,{icon:j.GitCommitIcon,sx:{mr:2}}),(0,t.jsx)(w.A,{sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:e.title})]}),(0,t.jsxs)(C.O.Body,{detailsError:n,detailsLoading:r,children:[(0,t.jsxs)(w.A,{sx:{display:"flex",flexDirection:"row",p:3},children:[(0,t.jsx)(h.r,{src:`${e.authorLogin}.png`,sx:{mr:2,flexShrink:0}}),(0,t.jsx)(w.A,{sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",direction:"rtl"},children:e.authorLogin})]}),(0,t.jsx)(w.A,{sx:{borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))"}}),(0,t.jsx)(C.O.Content,{children:(0,t.jsx)(B.G,{verifiedHTML:(0,$.Kc)(e.title)})}),(0,t.jsx)(w.A,{sx:{borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))"}}),(0,t.jsxs)(C.O.Details,{children:[(0,t.jsxs)(C.O.DetailLink,{href:(0,p.Do)({name:e.repository.name,ownerLogin:e.repository.ownerLogin}),icon:j.RepoIcon,children:[e.repository.ownerLogin,"/",e.repository.name]}),(0,t.jsx)(C.O.DetailLink,{href:e.url,icon:j.LinkExternalIcon,children:e.url})]})]})]})}try{W.displayName||(W.displayName="PullRequestReferencePreview")}catch{}function U({reference:e,details:r,detailsLoading:n,detailsError:i,onDismiss:s}){let o=new Map,a=new Map;if(r?.kind==="suggestionSymbol")for(let e of r.suggestionDefinitions??[]){if(!e.highlightedContents)continue;let r=`${e.repoOwner}/${e.repoName}/${e.path}`;o.has(r)||o.set(r,[]),o.get(r).push(e)}else if(r?.kind==="codeNavSymbol"){for(let e of r.codeNavDefinitions??[]){if(!e.highlightedContents)continue;let r=`${e.repoOwner}/${e.repoName}/${e.path}`;o.has(r)||o.set(r,[]),o.get(r).push(e)}for(let e of r?.codeNavReferences??[]){if(!e.highlightedContents)continue;let r=`${e.repoOwner}/${e.repoName}/${e.path}`;a.has(r)||a.set(r,[]),a.get(r).push(e)}}let l=[...o.values()][0]?.[0]??[...a.values()][0]?.[0],d=o.size>0,c=a.size>0,h=[...o.values()].length,x=[...o.values()].reduce((e,r)=>e+r.length,0),u=[...a.values()].length,g=[...a.values()].reduce((e,r)=>e+r.length,0),{contributors:w}=(0,m.u)(l?.repoOwner,l?.repoName,l?.commitOID,l?.path),[v]=(0,f.E)(l?.repoOwner,l?.repoName,l?.commitOID,l?.path);return(0,t.jsxs)(C.O.Frame,{children:[(0,t.jsx)(C.O.Header,{onDismiss:s,children:e.name}),(0,t.jsxs)(C.O.Body,{detailsError:i,detailsLoading:n,children:[d&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(C.O.SectionDivider,{children:[x," ",1===x?"definition":"definitions",h>1?` across ${h} files`:null]}),[...o.values()].map((e,r)=>(0,t.jsx)(C.O.CollapsibleSubsection,{title:e[0].path,initiallyOpen:0===r,children:(0,t.jsx)(C.O.Content,{children:e.map((e,r)=>e.highlightedContents?(0,t.jsx)(N,{trimLineBeginnings:1===e.highlightedContents.length,lines:e.highlightedContents,lineNumbers:_(e)},r):null)})},e[0].path))]}),c&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(C.O.SectionDivider,{children:[g," ",1===g?"reference":"references",u>1?` across ${u} files`:null]}),[...a.values()].map((e,r)=>(0,t.jsx)(C.O.CollapsibleSubsection,{title:e[0].path,initiallyOpen:0===r&&!d,children:(0,t.jsx)(C.O.Content,{children:e.map((e,r)=>e.highlightedContents?(0,t.jsx)(N,{trimLineBeginnings:1===e.highlightedContents.length,lines:e.highlightedContents,lineNumbers:_(e)},r):null)})},e[0].path))]}),(0,t.jsxs)(C.O.Details,{children:[l&&(0,t.jsxs)(C.O.DetailLink,{href:(0,p.Do)({name:l.repoName,ownerLogin:l.repoOwner}),icon:j.RepoIcon,children:[l.repoOwner,"/",l.repoName]}),w&&l&&(0,t.jsxs)(C.O.DetailLink,{icon:j.PeopleIcon,href:(0,p.bu)({owner:l.repoOwner,repo:l.repoName,commitish:l.commitOID,filePath:l.path}),children:[w.totalCount," ",1===w.totalCount?"contributor":"contributors"]}),v&&l&&(0,t.jsxs)(C.O.DetailLink,{icon:j.HistoryIcon,href:(0,p.$Q)({owner:l.repoOwner,repo:l.repoName,commitish:v?.oid}),children:[v?.author?.displayName," updated ",(0,t.jsx)(b.A,{datetime:v?.date})]}),l&&(0,t.jsxs)(C.O.DetailLink,{icon:j.LinkExternalIcon,href:(0,p.nD)({owner:l.repoOwner,repo:l.repoName,commitish:l.commitOID,filePath:l.path}),children:[l.repoOwner,"/",l.repoName,"/",l.path]})]})]})]})}function _({range:e}){return e?Array(e.end-e.start+1).fill(null).map((r,n)=>e.start+n):[]}try{U.displayName||(U.displayName="SymbolReferencePreview")}catch{}let X=e=>e?.start?e.end?`${e.start}-${e.end}`:`${e.start}`:"",q=e=>{let r=X(e.selectedRange),n=e.url.split(window.location.host)[1];return{href:e.url+r,path:n+r,range:r}};function K({reference:e,details:r,detailsLoading:n,detailsError:i,onDismiss:s}){let o=e.headFile??e.baseFile??e.head??e.base,{contributors:a}=(0,m.u)(o.repoOwner,o.repoName,o.commitOID,o.path),[l]=(0,f.E)(o.repoOwner,o.repoName,o.commitOID,o.path),{href:d,path:c,range:x}=q(e);return(0,t.jsxs)(C.O.Frame,{children:[(0,t.jsxs)(C.O.Header,{onDismiss:s,children:[(0,t.jsx)(h.r,{square:r?.repoIsOrgOwned,src:`${o.repoOwner}.png`,sx:{mr:2,flexShrink:0}}),(0,t.jsxs)(w.A,{sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:[o.repoOwner,"/",o.repoName,"/",o.path," ",x]})]}),(0,t.jsx)(C.O.Body,{detailsError:i,detailsLoading:n,children:(0,t.jsxs)(C.O.Details,{children:[(0,t.jsxs)(C.O.DetailLink,{href:(0,p.Do)({name:o.repoName,ownerLogin:o.repoOwner}),icon:j.RepoIcon,children:[o.repoOwner,"/",o.repoName]}),a&&(0,t.jsxs)(C.O.DetailLink,{icon:j.PeopleIcon,href:(0,p.bu)({owner:o.repoOwner,repo:o.repoName,commitish:o.commitOID,filePath:o.path}),children:[a.totalCount," ",1===a.totalCount?"contributor":"contributors"]}),l&&(0,t.jsxs)(C.O.DetailLink,{icon:j.HistoryIcon,href:(0,p.$Q)({owner:o.repoOwner,repo:o.repoName,commitish:l?.oid}),children:[l?.author?.displayName," updated ",(0,t.jsx)(b.A,{datetime:l?.date})]}),(0,t.jsx)(C.O.DetailLink,{icon:j.LinkExternalIcon,href:d,children:c})]})})]})}try{K.displayName||(K.displayName="FileDiffReferencePreview")}catch{}var G=n(99164);function J({dismissable:e}){let{reference:r,details:n,detailsLoading:i,detailsError:s,dismissReference:o}=Z();return(0,t.jsx)(Q,{reference:r,details:n,detailsLoading:i,detailsError:s,onDismiss:e?o:void 0})}function Q({reference:e,details:r,detailsLoading:n,detailsError:i,onDismiss:s}){switch(e.type){case"symbol":return(0,t.jsx)(U,{reference:e,details:r,detailsLoading:n,detailsError:i,onDismiss:s},(0,l.Vb)(e));case"file":case"snippet":return"Markdown"===e.languageName?(0,t.jsx)(M,{reference:e,details:r,detailsError:i,detailsLoading:n,onDismiss:s},(0,l.Vb)(e)):(0,t.jsx)(I,{reference:e,details:r,detailsLoading:n,detailsError:i,onDismiss:s},(0,l.Vb)(e));case"file-diff":return(0,t.jsx)(K,{reference:e,details:r,detailsLoading:n,detailsError:i,onDismiss:s},(0,l.Vb)(e));case"commit":return(0,t.jsx)(P,{reference:e,detailsLoading:n,detailsError:i,onDismiss:s},(0,l.Vb)(e));case"pull-request":return(0,t.jsx)(W,{reference:e,detailsLoading:n,detailsError:i,onDismiss:s},(0,l.Vb)(e));case"web-search":return(0,t.jsx)(G.I,{reference:e,onDismiss:s},(0,l.Vb)(e));default:return null}}function Z(){let e=(0,a.b)(),r=(0,o.Pk)().selectedReference,{isLoading:n,isError:t,data:i}=(0,d.I)({queryKey:["copilot","references",r?.type,r?(0,l.Vb)(r):void 0],queryFn:async()=>{if(!r)return null;let n=await e.service.hydrateReference(r);return n.ok?n.payload:null},staleTime:Number.MIN_VALUE});return{reference:r,dismissReference:(0,c.useCallback)(()=>e.selectReference(null),[e]),details:i??void 0,detailsLoading:n,detailsError:t}}try{J.displayName||(J.displayName="CopilotReferencePreview")}catch{}try{Q.displayName||(Q.displayName="CopilotReferencePreviewImpl")}catch{}function Y(){let{dismissReference:e,reference:r}=Z(),{screenSize:n}=(0,s.lm)(),o=n<s.Gy.large,a=r?.type==="web-search"?`Bing search results for "${r.query}"`:"Reference";return(0,t.jsxs)(i.A,{"aria-label":a,isOpen:!!r,onDismiss:e,sx:{display:"flex",flexDirection:"column",overflow:"hidden",borderRadius:"var(--borderRadius-large)",margin:0,...o?{height:["auto","auto"],top:"1dvh",width:"90dvw"}:{top:"10vh",width:"50dvw",maxWidth:"1024px"}},children:[(0,t.jsx)(i.A.Header,{children:a}),(0,t.jsx)(J,{})]})}try{Y.displayName||(Y.displayName="CopilotReferencePreviewDialog")}catch{}}}]);
//# sourceMappingURL=ui_packages_use-client-value_use-client-value_ts-ui_packages_copilot-chat_components_Header_t-12eff5-8f8e1a208115.js.map